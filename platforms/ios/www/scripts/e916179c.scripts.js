"use strict";function goBack(){history.go(-1)}angular.module("testApp",["ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/details/:routeId",{templateUrl:"views/details.html",controller:"DetailsCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("testApp").controller("MainCtrl",["$scope","$location","routeService","cacheService",function(a,b,c,d){a.filter=d.get("filter"),a.routes=d.get("routes"),a.routes&&a.routes.length>0&&($(".list-group").show(),$("initial-text").hide()),a.search=function(){c.findRoutesByStopName(a.filter).then(function(b){a.routes=b.data.rows,d.put("routes",a.routes),d.put("filter",a.filter)})},a.viewRouteDetails=function(a){d.put("route",a),b.path("details/"+a.id)}}]),angular.module("testApp").service("routeService",["$http",function(a){this.findRoutesByStopName=function(b){return console.log(b),a.get("data/routes.json")},this.findDeparturesByRouteId=function(b){return console.log(b),a.get("data/departures.json")}}]),angular.module("testApp").controller("DetailsCtrl",["$scope","$routeParams","routeService","cacheService",function(a,b,c,d){a.routeId=b.routeId,a.route=d.get("route"),c.findDeparturesByRouteId(a.routeId).then(function(b){a.departures=b.data.rows})}]),angular.module("testApp").service("cacheService",["$cacheFactory",function(a){return a("appCache")}]);